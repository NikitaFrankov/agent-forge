{"id":"agent-forge-ueo","title":"Refactor: forge-fix skill workflow enforcement","status":"closed","priority":2,"issue_type":"epic","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:27:47.748923+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:19:00.340103+03:00","closed_at":"2026-03-01T13:19:00.340103+03:00","close_reason":"Refactoring complete: Added enforcement mechanisms to forge-fix skill based on myhyperpowers patterns"}
{"id":"agent-forge-ueo.1","title":"Add rigidity level and enforcement metadata","design":"## Goal\nAdd rigidity_level declaration and enforcement metadata to SKILL.md frontmatter\n\n## Implementation\n\n### Step 1: Edit frontmatter (lines 1-8)\nReplace existing frontmatter with:\n```yaml\n---\nname: forge-fix\ndescription: |\n  Execute deterministic bug fix with autonomous diagnosis, root cause analysis,\n  regression test creation, and verification. Use when fixing bugs, debugging\n  issues, investigating crashes, or when user describes any error/problem/bug.\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash, Task, Skill\nrigidity_level: standard\nenforcement:\n  blocking_gates: true\n  evidence_required: true\n  checkpoint_tracking: true\n---\n```\n\n### Step 2: Add skill_overview, freedom_level, quick_reference after frontmatter\nInsert after line 9:\n```markdown\n\u003cskill_overview\u003e\nDeterministic bug fix pipeline with enforced TDD cycle: diagnosis → regression test → minimal fix → verification.\n\u003c/skill_overview\u003e\n\n\u003cfreedom_level\u003e\nSTANDARD FREEDOM - Follow stage gates strictly. Adapt investigation and fix approaches to codebase context.\nViolating blocking gates or skipping regression tests is violating the workflow.\n\u003c/freedom_level\u003e\n\n\u003cquick_reference\u003e\n| Stage | Blocking Gate | Must Complete Before Next |\n|-------|--------------|---------------------------|\n| **Intake** | Bug ID in beads | ✓ bd issue created |\n| **Investigation** | Root cause documented | ✓ KV has diagnosis |\n| **Planning** | Plan status: READY | ✓ Max 2 iterations |\n| **Implementation** | Regression test PASSES | ✓ Test wrote first, fix approved |\n| **Verification** | Full suite passes | ✓ All checks complete |\n\n**FORBIDDEN:** Fix without bd issue, fix without regression test, skip stages\n**REQUIRED:** Every bug gets tracked, tested, verified before closing\n\u003c/quick_reference\u003e\n```\n\n## Verification\n```bash\nhead -20 plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:24.944244+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:04:55.408285+03:00","closed_at":"2026-03-01T13:04:55.408285+03:00","close_reason":"Added rigidity_level, enforcement metadata, skill_overview, freedom_level, quick_reference sections","dependencies":[{"issue_id":"agent-forge-ueo.1","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:24.944833+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.2","title":"Add Iron Law and FORBIDDEN/REQUIRED sections","design":"## Goal\nAdd Iron Law (single memorable principle) and FORBIDDEN/REQUIRED binary constraints\n\n## Implementation\n\n### Step 1: Add Iron Law before Pipeline Stages (line 19)\nInsert before `## Pipeline Stages`:\n```markdown\n## Iron Law\n\n**NO TRACKING OR REGRESSION TEST = NOT FIXED**\n\nEvery bug fix MUST:\n1. Have a bd issue tracking it\n2. Have a regression test proving the fix works\n\nIf either is missing, the bug is not fixed. No exceptions.\n\n```\n\n### Step 2: Add FORBIDDEN/REQUIRED after Key Principles (before Condensed Process)\nInsert before `## Condensed Process`:\n```markdown\n## Hard Constraints\n\n### FORBIDDEN\n\nThese actions will cause the fix to be rejected:\n\n- **NO** fix without creating bd bug issue first\n- **NO** fix without writing regression test first\n- **NO** fixing symptoms instead of root cause\n- **NO** refactoring or improvements during bug fix (\"while we're here\")\n- **NO** skipping stages or blocking gates\n- **NO** claiming fixed without running verification commands\n- **NO** committing before code review approval\n\n### REQUIRED\n\nThese actions are mandatory for every bug fix:\n\n- **MUST** create bd issue: `bd create --type bug --title \"Bug: {description}\"`\n- **MUST** write regression test that FAILS before fix\n- **MUST** verify regression test PASSES after fix\n- **MUST** get code review approval before commit\n- **MUST** run full test suite after fix\n- **MUST** close bd issue after verification: `bd close \u003cid\u003e`\n- **MUST** sync with remote: `bd sync`\n```\n\n## Verification\n```bash\ngrep -n \"## Iron Law\\|## Hard Constraints\\|### FORBIDDEN\\|### REQUIRED\" plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.021702+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:06:09.878983+03:00","closed_at":"2026-03-01T13:06:09.878983+03:00","close_reason":"Added Iron Law and FORBIDDEN/REQUIRED sections","dependencies":[{"issue_id":"agent-forge-ueo.2","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.022247+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.3","title":"Add mandatory first response protocol","design":"## Goal\nAdd MANDATORY FIRST RESPONSE PROTOCOL section that Claude must execute before any other action\n\n## Implementation\n\n### Step 1: Add protocol after Iron Law (before Pipeline Stages)\nInsert after `## Iron Law`:\n```markdown\n## MANDATORY FIRST RESPONSE PROTOCOL\n\n**BEFORE doing ANYTHING else, you MUST complete this checklist:**\n\n### ☐ Step 1: Announce Workflow\nSay: \"I'm using **forge-fix** to fix this bug with enforced TDD workflow.\"\n\n### ☐ Step 2: Create Tracking Issue\n```bash\nbd create --type bug --title \"Bug: {description}\"\n```\n- Note the issue ID (e.g., `bd-123`)\n\n### ☐ Step 3: Initialize Context\nCreate `.agent-forge/context/{bug-id}.pack.md` with:\n- Bug description\n- Bug ID from beads\n- Current stage: `intake`\n- Next step: `investigation`\n\n### ☐ Step 4: Verify Prerequisites\n- [ ] Bug description is not empty\n- [ ] bd issue was created successfully\n- [ ] Context pack was initialized\n\n**ONLY AFTER all checkboxes are complete:** Proceed to Stage 1 (Intake).\n\n**If you skip this protocol:** STOP. You are not following the workflow.\n```\n\n## Verification\n```bash\ngrep -n \"## MANDATORY FIRST RESPONSE PROTOCOL\" plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.102062+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:07:05.538508+03:00","closed_at":"2026-03-01T13:07:05.538508+03:00","close_reason":"Added MANDATORY FIRST RESPONSE PROTOCOL section","dependencies":[{"issue_id":"agent-forge-ueo.3","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.102589+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.4","title":"Add stage entry/exit guards with blocking conditions","design":"## Goal\nAdd blocking GATE sections between stages with explicit STOP conditions\n\n## Implementation\n\n### Step 1: Add Entry Requirements to Stage 1 (Intake)\nAdd before numbered steps:\n```markdown\n**ENTRY REQUIREMENTS:**\n- [ ] Bug description provided by user\n- [ ] No existing bd issue for this bug\n\n**STOP:** If bug description is empty, ask user for details before proceeding.\n```\n\n### Step 2: Add Exit Gate after Stage 1\n```markdown\n**GATE: Intake Complete**\nBefore proceeding to Investigation, verify:\n- [ ] Bug ID exists in beads\n- [ ] Labels set: `forge:fix`, `forge:pending_diagnosis`\n- [ ] KV store initialized\nIf any checkbox is empty: **DO NOT PROCEED.** Fix the issue first.\n```\n\n### Step 3: Add Entry Requirements to Stages 2-5\nEach stage gets:\n```markdown\n**ENTRY REQUIREMENTS:**\n- [ ] [prerequisite 1]\n- [ ] [prerequisite 2]\n**STOP:** If [condition], return to [previous stage].\n```\n\n### Step 4: Add Exit Gates after Stages 2-4\nEach gets GATE with checkboxes and DO NOT PROCEED condition.\n\n### Step 5: Add Final Exit Gate after Verification\n```markdown\n**GATE: Bug Fix Complete**\nBefore closing, verify ALL:\n- [ ] Root cause addressed\n- [ ] Regression test passes\n- [ ] Full test suite passes\n- [ ] No side effects introduced\n- [ ] bd issue closed\n- [ ] Synced with remote\nIf ANY checkbox is empty: **BUG IS NOT FIXED.** Complete the missing items.\n```\n\n## Verification\n```bash\ngrep -n \"GATE:\\|ENTRY REQUIREMENTS:\\|STOP:\" plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.184105+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:12:40.465074+03:00","closed_at":"2026-03-01T13:12:40.465074+03:00","close_reason":"Added stage entry/exit gates with blocking conditions to all 5 stages","dependencies":[{"issue_id":"agent-forge-ueo.4","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.184631+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.5","title":"Add anti-patterns and common excuses sections","design":"## Goal\nAdd concrete anti-pattern examples and Common Excuses section listing rationalizations to reject\n\n## Implementation\n\n### Step 1: Add Anti-Patterns section after Hard Constraints\nInsert after `## Hard Constraints`:\n```markdown\n## Anti-Patterns\n\n### Anti-Pattern 1: Fixing Without Tracking\n**What happens:** Developer sees bug, immediately starts fixing code. No bd issue created.\n**Result:** No regression test, no visibility, team cannot verify.\n**Correct approach:** Create bd issue FIRST, then investigate.\n\n### Anti-Pattern 2: Fixing Symptoms Instead of Root Cause\n**What happens:** Developer sees NPE, adds null check. Root cause was data corruption upstream.\n**Result:** Bug resurfaces in different form. Time wasted.\n**Correct approach:** Trace back to WHY. Fix the source.\n\n### Anti-Pattern 3: Skipping Regression Test\n**What happens:** Developer fixes bug, verifies manually, commits. No automated test.\n**Result:** Bug can reappear without detection. No proof fix works.\n**Correct approach:** Write test FIRST, watch it FAIL, then fix.\n\n### Anti-Pattern 4: Scope Creep During Fix\n**What happens:** Developer fixes bug, refactors nearby code.\n**Result:** Large diff, unclear what broke if tests fail, unrelated risk.\n**Correct approach:** Fix ONLY the bug. Separate task for refactoring.\n\n### Anti-Pattern 5: Claiming Fixed Without Verification\n**What happens:** Developer implements fix, assumes it works. Does not run tests.\n**Result:** Fix may not work, may have broken other tests. False completion.\n**Correct approach:** Run verification commands. See green tests. Then claim fixed.\n```\n\n### Step 2: Add Common Excuses section after Anti-Patterns\n```markdown\n## Common Excuses\n\n**All of these mean: STOP. You are trying to skip the workflow.**\n\n| Excuse | Why It's Wrong |\n|--------|----------------|\n| \"This is a simple fix\" | Simple fixes still need tracking and tests. |\n| \"I'll add the test later\" | Later never comes. Write it now. |\n| \"The existing test covers it\" | If it did, the bug wouldn't exist. |\n| \"I don't want to create a bd issue\" | No tracking = not fixed. |\n| \"Manual testing is enough\" | Doesn't prevent recurrence. Automate. |\n| \"I'm being pragmatic\" | Pragmatism without process = debt. |\n| \"The bug is urgent\" | Rushed fixes cause more bugs. |\n| \"I know the cause\" | Assumptions cause misdiagnosis. Verify. |\n| \"Code review isn't needed\" | Small fixes cause big problems. Always review. |\n```\n\n## Verification\n```bash\ngrep -n \"## Anti-Patterns\\|## Common Excuses\" plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.264253+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:14:35.246175+03:00","closed_at":"2026-03-01T13:14:35.246175+03:00","close_reason":"Added Anti-Patterns and Common Excuses sections","dependencies":[{"issue_id":"agent-forge-ueo.5","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.264774+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.6","title":"Add evidence gates and verification requirements","design":"## Goal\nAdd evidence-based verification requirements with specific commands and expected outputs\n\n## Implementation\n\n### Step 1: Add Evidence Requirements Table after Common Excuses\n```markdown\n## Evidence Requirements\n\n**Every claim MUST be backed by fresh verification evidence.**\n\n| Claim | Verification Command | Expected Output | NOT Sufficient |\n|-------|---------------------|-----------------|----------------|\n| **Bug tracked** | `bd show {id}` | Issue exists with `forge:fix` label | \"I created it\" |\n| **Root cause found** | `bd kv get fix/{id}/diagnosis/root_cause` | Non-empty string | \"I think it's...\" |\n| **Regression test fails** | `./gradlew test --tests \"{TestName}\"` | `FAILED` in output | \"It should fail\" |\n| **Regression test passes** | `./gradlew test --tests \"{TestName}\"` | `BUILD SUCCESSFUL` | \"I fixed it\" |\n| **Full suite passes** | `./gradlew test` | 0 failures | \"Tests look good\" |\n| **Code reviewed** | Review agent output | `APPROVED` | \"Looks good\" |\n| **Bug closed** | `bd show {id}` | Status: `closed` | \"I'm done\" |\n```\n\n### Step 2: Add Evidence Protocol\n```markdown\n### Evidence Protocol\n\n**Before claiming ANY completion:**\n1. **Identify** what command proves this claim\n2. **Run** the full command fresh\n3. **Read** the output completely\n4. **Verify** output confirms the claim\n5. **Only then** make the claim\n\n**Red flags:** \"should\", \"probably\", \"seems to\" = skipping evidence\n```\n\n### Step 3: Add Pre-Commit Verification Checklist\n```markdown\n## Pre-Commit Verification Checklist\n\n### After Writing Regression Test:\n```bash\n./gradlew test --tests \"{TestName}\"\n# MUST see: FAILED\n```\n\n### After Implementing Fix:\n```bash\n./gradlew test --tests \"{TestName}\"  # MUST pass\n./gradlew test                         # MUST all pass\n```\n```\n\n## Verification\n```bash\ngrep -n \"## Evidence Requirements\\|## Pre-Commit Verification\" plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.345053+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:15:54.034495+03:00","closed_at":"2026-03-01T13:15:54.034495+03:00","close_reason":"Added Evidence Requirements table and Evidence Protocol section","dependencies":[{"issue_id":"agent-forge-ueo.6","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.3457+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.7","title":"Add skill composition (calls/called_by) section","design":"## Goal\nAdd This skill calls and This skill is called by sections for composable skill graph\n\n## Implementation\n\n### Step 1: Add Integration section before Resume Support\nInsert before `## Resume Support`:\n```markdown\n## Integration\n\n### This Skill Calls\n\n| Skill/Agent | When | Purpose |\n|-------------|------|---------|\n| `agent-forge:intake` | Stage 1 | Parse command, create beads structure |\n| `agent-forge:investigator` | Stage 2 | Root cause investigation |\n| `executor:debugger` | Stage 2 (optional) | Stack-specific debugging |\n| `executor:implementer` | Stage 4 | Code implementation |\n| `executor:reviewer` | Stage 4 | Code review |\n| `bd` CLI | All stages | Tracking, state |\n\n### This Skill Is Called By\n\n| Trigger | User says/does |\n|---------|---------------|\n| Explicit invocation | `/forge-fix {description}` |\n| Bug description | \"fix this bug\", \"there's a crash\" |\n| Test failure | \"this test is failing\" |\n| Issue reference | \"fix BUG-123\" |\n\n### Agents Used\n\n| Agent | Role | Tools |\n|-------|------|-------|\n| `agent-forge:intake` | Parse and initialize | Read, Bash (bd) |\n| `agent-forge:investigator` | Root cause | Read, Grep, Glob, Bash |\n| `executor:implementer` | Write test + fix | Read, Write, Edit, Bash |\n| `executor:reviewer` | Review | Read, Grep, Glob |\n\n### External Dependencies\n\n- **beads CLI (`bd`)**: Required for tracking\n- **Executor context**: `.agent-forge/executor.context`\n- **Test framework**: Runnable tests required\n```\n\n## Verification\n```bash\ngrep -n \"## Integration\\|### This Skill Calls\\|### This Skill Is Called By\" plugins/agent-forge/skills/forge-fix/SKILL.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.433689+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:17:10.662576+03:00","closed_at":"2026-03-01T13:17:10.662576+03:00","close_reason":"Added Integration section with skill calls/called_by relationships","dependencies":[{"issue_id":"agent-forge-ueo.7","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.43421+03:00","created_by":"nikitaradionov"}]}
{"id":"agent-forge-ueo.8","title":"Update REFERENCE.md with enforcement patterns","design":"## Goal\nUpdate REFERENCE.md with new enforcement patterns and examples\n\n## Implementation\n\n### Step 1: Add Enforcement Patterns section after Best Practices\nAdd to REFERENCE.md:\n```markdown\n## Enforcement Patterns\n\n### Iron Law\nNO TRACKING OR REGRESSION TEST = NOT FIXED\n\n### Mandatory First Response Protocol\n1. Announce workflow\n2. Create bd issue\n3. Initialize context\n4. Verify prerequisites\n\n### Stage Gates\nEach stage has entry requirements and exit gates with checkboxes.\n\n### Evidence Requirements\nClaims require fresh evidence via verification commands.\n\n### Anti-Pattern Enforcement\nCommon anti-patterns documented with what/why/correct approach.\n\n### Common Excuses Rejection\nPre-defined list of rationalizations that mean STOP.\n```\n\n### Step 2: Add Troubleshooting section at end\n```markdown\n## Troubleshooting\n\n### Skill Not Being Followed\n1. Check skill activation\n2. Verify rigidity level\n3. Check for common issues\n4. Consider hook-based enforcement\n\n### Stuck at a Gate\nRead requirements, complete missing items, re-verify.\n\n### Investigation Not Finding Root Cause\nUse executor:debugger, investigator agent, or escalate.\n```\n\n## Verification\n```bash\ngrep -n \"## Enforcement Patterns\\|## Troubleshooting\" plugins/agent-forge/skills/forge-fix/REFERENCE.md\n```","status":"closed","priority":2,"issue_type":"task","owner":"n.frankov76@gmail.com","created_at":"2026-03-01T12:28:25.519426+03:00","created_by":"nikitaradionov","updated_at":"2026-03-01T13:18:28.293947+03:00","closed_at":"2026-03-01T13:18:28.293947+03:00","close_reason":"Added Enforcement Patterns and Troubleshooting sections to REFERENCE.md","dependencies":[{"issue_id":"agent-forge-ueo.8","depends_on_id":"agent-forge-ueo","type":"parent-child","created_at":"2026-03-01T12:28:25.519979+03:00","created_by":"nikitaradionov"}]}
